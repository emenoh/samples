package com.brilliantblue.panasonic.IFEdemo.audioVideo.liveTV{	import flash.display.*;	import flash.events.*;	import flash.net.*;	import flash.text.*;	import flash.display.Stage;	import flash.display.StageDisplayState;		import com.brilliantblue.panasonic.IFEdemo.view;	import com.brilliantblue.panasonic.IFEdemo.common.screen.*;	import com.brilliantblue.panasonic.IFEdemo.common.buttons.*;			public class view extends com.brilliantblue.panasonic.IFEdemo.view	{						private var _xmlLoader:URLLoader		private var _imageLoader:Loader;		private var _extrasLoader:Loader;		private var _xmlData:XML;		private var _titleText:String;		private var _movies:XMLList;		private var _movie:XMLList;		private var _bodyText:String;		private var _priceText:String;		private var _description:TextField;		private var _thumbsrc:String;		private var _price:String;		private var _movieThumb:MovieClip;		private var _movieExtras:MovieClip;		private var _purchaseButton:MovieClip;		private var _previewButton:MovieClip;		//private var _myTextField:TextField;				public function view () 		{			//_itemID = "movie.002";//test ID			//////////set up page//////////						screen.title.visible = false;			contentRegion.visible = false;									//////////load data//////////						loadXML("xml/media/ent/movies.xml");						//////////add buttons//////////						_purchaseButton = new BasicButton();			_purchaseButton.setTitle("purchase");			_purchaseButton.x = 995;			_purchaseButton.y = 606			addChild(_purchaseButton);									_previewButton = new BasicButton();			_previewButton.setTitle("preview");			_previewButton.x = 830;			_previewButton.y = 606			addChild(_previewButton);																	}						private function loadXML(xmlpath)		{			_xmlLoader = new URLLoader();			_xmlData = new XML();			_xmlLoader.addEventListener(Event.COMPLETE, onLoadXML,false,0,true);			_xmlLoader.load(new URLRequest(xmlpath));		}		private function onLoadXML(e:Event):void {			_xmlData = new XML(e.target.data);			drawScreen(_xmlData);			//tree3D.loadXMLData(xmlData);			//trace(_xmlData);		//	spotlight.sourceXML = xmlData;					//	spotlight.addEventListener(spotlightEvent.SPOTLIGHT_CHANGE, onSpotlightChange, false, 0, true);		//	tree3D.loadXMLData(xmlData);						}				private function loadImage(imagePath, onImageLoaded)		{			_imageLoader = new Loader();			_imageLoader.contentLoaderInfo.addEventListener(Event.INIT, onImageLoaded);			_imageLoader.load( new URLRequest(imagePath));		}				private function loadExtras(imagePath, onExtrasLoaded)		{			_extrasLoader = new Loader();			_extrasLoader.contentLoaderInfo.addEventListener(Event.INIT, onExtrasLoaded);			_extrasLoader.load( new URLRequest(imagePath));		}						private function drawScreen(_xmlData)		{			_movies = _xmlData.*;			_movie = _movies.(id == _itemID);			//trace(_xmlData);			_titleText = _movie.name.toString().toUpperCase();			_priceText = _movie.price.toString();			//_titleText = String(_titleText+" - "+_priceText);			_bodyText = _movie.synopsis.toString();			trace(_bodyText)			var _studio = "Studio: "+ _movie.studio.toString();			trace(_studio)			var _directors = "Directed by: " +  _movie.directors.toString();			trace(_directors)			var _rating = "Rated: " +  _movie.classification.toString();			var _starring = "Starring: " + _movie.stars.toString();						var _cost = "Cost: $3.50 ";			var _runTime = "Running Time: " + _movie.run_time.toString();									_thumbsrc = _movie.image.toString();			//_price = _movie.price.toString();									super.setLayout("2Column");			super.setScreenTitle(_titleText);						screen.title.x = (contentRegion.x - screen.x);			screen.title.visible = true;			screen.title.maxChars = 200;									contentMC = new MovieClip();						_description = new TextField();			_description.width = contentRegion.width - 100;			//_description.height = 50;			_description.text = _bodyText + "\n\n" + _cost + "\n" + _rating + "\n" + _directors + "\n" + _starring + "\n" + _runTime + "\n" + _studio;			_description.wordWrap = true;			_description.autoSize = TextFieldAutoSize.LEFT;			_description.embedFonts = true;			_description.y = 0;			_description.setTextFormat(CC_BodyFormat);			contentMC.addChild(_description);						super.setContentMC(contentMC);			contentRegion.visible = true;			loadImage(_thumbsrc, addThumb);			//dummy clip for the "Games other people liked" section			loadExtras("images/ent/movies/movieExtras.png", addExtras);								}				private function addThumb (e:Event){			_movieThumb = new MovieClip();			_movieThumb.addChild(_imageLoader.content);			_movieThumb.x = 165;			_movieThumb.y = 100;			var tempWidth = _movieThumb.width;			var tempHeight = _movieThumb.height			_movieThumb.height = 240;			var tempRatio =  _movieThumb.height / tempHeight;			_movieThumb.width = _movieThumb.width * tempRatio;			this.addChild(_movieThumb);		}				private function addExtras (e:Event){			_movieExtras = new MovieClip();			_movieExtras.addChild(_extrasLoader.content);			_movieExtras.x = 90;			_movieExtras.y = 340;			this.addChild(_movieExtras);		}							}		}