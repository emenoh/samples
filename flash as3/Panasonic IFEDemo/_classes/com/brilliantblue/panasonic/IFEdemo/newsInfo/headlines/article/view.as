package com.brilliantblue.panasonic.IFEdemo.newsInfo.headlines.article{	import flash.display.*;	import flash.events.*;	import flash.text.*	import flash.utils.*;	import flash.net.*;	import caurina.transitions.*;		import com.brilliantblue.panasonic.IFEdemo.view;	import com.brilliantblue.panasonic.IFEdemo.common.screen.*;	import com.brilliantblue.panasonic.IFEdemo.common.buttons.*;	import com.brilliantblue.panasonic.IFEdemo.common.key.*;		import com.brilliantblue.panasonic.IFEdemo.newsInfo.headlines.*;		public class view extends com.brilliantblue.panasonic.IFEdemo.view	{						 	private var _articleData:XML;			private var _articles:XMLList;			private var _article:XMLList;			private var articleID;			private var CC_NewsHeadlineFormat:TextFormat;			private var CC_NewsSourceFormat:TextFormat;			private var CC_NewsContentFormat:TextFormat;		private var backButton;				public function view () 		{			//trace(_stage.stageWidth);			//trace(_itemID);			setLayout("1column");			adjustScreen();			//setScreenTitle("headlines");			/*			var weatherSidebar = new weatherSideBarMC;			weatherSidebar.x = 975;			weatherSidebar.y = 155;						addChild(weatherSidebar);*/												/*			var newsTicker = new newsTickerMC;			newsTicker.x = 405;			newsTicker.y = 610;						addChild(newsTicker);*/								//first load the articles... then load the categories, then draw the screen			//loadArticles("xml/newsInfo/news_articles.xml");											CC_NewsHeadlineFormat = new TextFormat();			CC_NewsHeadlineFormat.font = "Century Gothic";			CC_NewsHeadlineFormat.kerning = true;			CC_NewsHeadlineFormat.bold = true;			CC_NewsHeadlineFormat.color = 0xFFFFFF;			CC_NewsHeadlineFormat.size = 24;			CC_NewsHeadlineFormat.align = "left";						CC_NewsSourceFormat = new TextFormat();			CC_NewsSourceFormat.font = "Century Gothic";			CC_NewsSourceFormat.kerning = true;			CC_NewsSourceFormat.color = 0xFFFFFF;			CC_NewsSourceFormat.size = 16;			CC_NewsSourceFormat.align = "left";						CC_NewsContentFormat = new TextFormat();			CC_NewsContentFormat.font = "Century Gothic";			CC_NewsContentFormat.kerning = true;			CC_NewsContentFormat.color = 0xFFFFFF;			CC_NewsContentFormat.size = 20;			CC_NewsContentFormat.align = "left";												backButton = new BasicButton;			backButton.x = 120;			backButton.y = 606;			backButton.setTitle("BACK");			backButton.setClickEvent(goBack);			addChild(backButton);												this.addEventListener(Event.ADDED_TO_STAGE, onAdded,false,0,true);									currentItemOption = backButton;						currentItemOption.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_OVER, true, false));		}								private function onAdded(e:Event){			//trace("added");            stage.addEventListener(KeyboardEvent.KEY_UP, navUp,false,0,true);            stage.addEventListener(KeyboardEvent.KEY_DOWN, navDown,false,0,true);						_articleData = MovieClip(root)._newsArticles;			drawScreen();					}				public function setArticleID (_articleID){			articleID = _articleID;		}						private function navUp(e:KeyboardEvent){			//trace(e.keyCode);			k = KH.convertKeyCodeToKey(e.keyCode, e.shiftKey)									switch(k)				{					/*case KeyType.LEFT://left arrow											trace(currentItemOption.name);						//currentItem.dispatchEvent(new InteractiveScene3DEvent(InteractiveScene3DEvent.OBJECT_OUT, currentItem));						currentItemOption.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_OUT, true, false));						prevItemOption = getPrevOption(currentItemOption);						prevItemOption.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_OVER, true, false));						currentItemOption = prevItemOption;						trace(currentItemOption.name);						break;					case KeyType.RIGHT://right arrow						trace(currentItemOption.name);						currentItemOption.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_OUT, true, false));						nextItemOption = getNextOption(currentItemOption);						nextItemOption.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_OVER, true, false));						currentItemOption = nextItemOption;						trace(currentItemOption.name);						break;*/																				case KeyType.UP://up arrow						upArrow.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_UP, true, false));						break;											case KeyType.DOWN://down arrow						downArrow.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_UP, true, false));						break;											case KeyType.OK://select current item						//if(currentItem != previousItem){						//keyboard = true;						//trace(currentItem.name);						var optionButton = currentItemOption;						optionButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK, true, false));						//}						break;																	case KeyType.HOME://back button						closeButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK, true, false));						break;																case KeyType.BACK://back button						closeButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK, true, false));						break;																					}						}						private function navDown(e:KeyboardEvent){						k = KH.convertKeyCodeToKey(e.keyCode, e.shiftKey)									switch(k)				{											case KeyType.UP://up arrow						upArrow.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_DOWN, true, false));						break;											case KeyType.DOWN://down arrow						downArrow.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_DOWN, true, false));						break;										}						}						override protected function screenShutDown(){						stage.removeEventListener(KeyboardEvent.KEY_UP, navUp);			stage.removeEventListener(KeyboardEvent.KEY_DOWN, navDown);		}								public function drawScreen():void 		{						_articles = _articleData.*;			_article = _articles.(id == articleID);			//trace(_article);						var articleHeadline = _article.name;			var articleSource = _article.source;			var articleAuthor = _article.author;			var articleContent = _article.content;									//setScreenTitle(articleHeadline);			var contentWidth = 900;						var articlesHolderMC = new MovieClip();						var articleMC = new MovieClip();				articleMC.y = 0;				articleMC.name = "articleMC";									var articleHeadlineTextClip = new TextField();							articleHeadlineTextClip.width = contentWidth;				articleHeadlineTextClip.text = articleHeadline.toString().toUpperCase();				articleHeadlineTextClip.x = 5;				articleHeadlineTextClip.y = 5;				articleHeadlineTextClip.wordWrap = true;				articleHeadlineTextClip.autoSize = TextFieldAutoSize.LEFT;				articleHeadlineTextClip.embedFonts = true;				articleHeadlineTextClip.selectable = false;				articleHeadlineTextClip.setTextFormat(CC_NewsHeadlineFormat);									var articleSourceTextClip = new TextField();				articleSourceTextClip.width = contentWidth;				articleSourceTextClip.text = articleSource;				articleSourceTextClip.x = 5;				articleSourceTextClip.y = 40;				articleSourceTextClip.wordWrap = true;				articleSourceTextClip.autoSize = TextFieldAutoSize.LEFT;				articleSourceTextClip.embedFonts = true;				articleSourceTextClip.selectable = false; 				articleSourceTextClip.setTextFormat(CC_NewsSourceFormat);									var articleContentTextClip = new TextField();				articleContentTextClip.width = contentWidth;				articleContentTextClip.text = articleContent;				articleContentTextClip.x = 5;				articleContentTextClip.y = 60;				articleContentTextClip.wordWrap = true;				articleContentTextClip.multiline = true;				articleContentTextClip.autoSize = TextFieldAutoSize.LEFT;				articleContentTextClip.embedFonts = true;				articleContentTextClip.selectable = false; 				articleContentTextClip.setTextFormat(CC_NewsContentFormat);											articleMC.addChild(articleHeadlineTextClip);			articleMC.addChild(articleSourceTextClip);			articleMC.addChild(articleContentTextClip);									articlesHolderMC.addChild(articleMC);						setContentMC(articlesHolderMC);						try{			var scrollBar = contentRegion.getChildByName("sb");			scrollBar.getChildByName("scroller").y = 0;						}catch(e:Error){			}					}//end drawScreen								private function goBack(e:MouseEvent){			//trace("Go back - 4");			parentMC = this.parent;			var myView = new com.brilliantblue.panasonic.IFEdemo.newsInfo.headlines.view();						//trace(this.parent.name);			myView.x = -1280;//at lest... maybe further right									Tweener.addTween(this,{							 x: 1280, 							 time: 1, 							 delay: 0.25, 							 onComplete: function(){										swapOutClose();										parentMC.addChild(myView);			Tweener.addTween(myView,{x: 0, time: 1, delay: 0.25 });										}, 							 onCompleteScope: this});											}								/*		private function loadArticles(xmlpath)		{			var _xmlLoader = new URLLoader();			_articleData = new XML();			_xmlLoader.addEventListener(Event.COMPLETE, onLoadArticles,false,0,true);			_xmlLoader.load(new URLRequest(xmlpath));		}		private function onLoadArticles(e:Event):void {			_articleData = new XML(e.target.data);			//loadCategories("xml/newsInfo/news_category.xml");			//drawScreen();		}*/											}//end		}