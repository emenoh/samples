package {	import flash.display.*;	import flash.events.*;	import flash.text.*	import flash.utils.*	import flash.external.*	import flash.net.*;				public class viewTest extends MovieClip	{				public var tabInfoMC:MovieClip;		public var myTextField:TextField;		public var leftNav:Array;		private var xmlLoader:URLLoader;		private var _filesData:XML;		private var _files:XMLList;		private var _photos:XMLList;		private var _fullScreenTarget:String = '';		private var _fullScreen:Boolean = false;		private var _totalPhotos:Number = 0;		private var viewBtn;		public var usbTimer:Timer;		public var messageFormat:TextFormat;		private var currentItem;		private var currentItemOption;		private var currentItemParent;		private var currentItemChild;		private var currentItemGroup = "leftNav";		private var totalItems;		private var usbStatus;		private var usbDirectory;		private var _xmlLoaded:Boolean = false;		private var totalFiles;				public function viewTest () 		{						loadContent("tmp/output.xml");							}										private function loadContent(xmlPath) 		{			//ExternalInterface.call("myAlert","Loading XML File.");			if(_xmlLoaded == false){				xmlLoader = new URLLoader();				xmlLoader.addEventListener(Event.COMPLETE,onLoadXML);             	xmlLoader.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);				xmlLoader.load(new URLRequest(xmlPath));			}						}					private function onLoadXML(e:Event):void 		{			_xmlLoaded = true;			//var image:RegExp = /.*[^1].*\.(((j|J)(p|P)(g|G))|((p|P)(n|N)(g|G))|((g|G)(i|I)(f|F))|((j|J)(p|P)(e|E)(g|G)))$/;			var image:RegExp =/^(.*)(\._+)(.*)\.(((j|J)(p|P)(g|G))|((p|P)(n|N)(g|G))|((g|G)(i|I)(f|F))|((j|J)(p|P)(e|E)(g|G)))$/;			var image2:RegExp = /^([a-zA-Z\/].*|[0-9].*)\.(((j|J)(p|P)(g|G))|((p|P)(n|N)(g|G))|((g|G)(i|I)(f|F))|((j|J)(p|P)(e|E)(g|G)))$/;									_filesData = new XML(e.target.data);						_photos = _filesData.*;			//ExternalInterface.call("myAlert","XML Loaded: "+_filesData);			trace("Unfiltered: "+ _photos);			var totalItems =  _photos.length();			var myArray = new Array();			for(var i = totalItems-1; i >= 0;i--){				var path = _photos[i].@path;				//trace(path);				//trace(image2["test"]( path ))				if ( image["test"]( path ) == true){										//trace(path);					//myArray.push(i);					delete _photos[i];				}											if ( image2["test"]( path ) == false){										//trace(path);					delete _photos[i];				}							}												//trace(myArray.length);			/*for(var j = myArray.length-1; j >= 0;j--){				trace(myArray[j]);				delete _photos[myArray[j]];			}*/									//ExternalInterface.call("myAlert","Photos Loaded: "+_photos);						//_totalPhotos = _photos.length();									//ExternalInterface.call("myAlert","Total Photos: "+_totalPhotos);						trace("FILTERED "+_photos);								//drawScreen();										}						private function errorHandler(e:IOErrorEvent)		{										}																}		}